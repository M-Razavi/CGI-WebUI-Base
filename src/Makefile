####################################################################################################
#                                          User Section                                            #
####################################################################################################
#____________________________________________________________________________ Source File Languages
#
#LANGUAGE	=	c
LANGUAGE	=	cpp
#____________________________________________________________________________ Program Name
#
PROGRAM		=	index.cgi
#____________________________________________________________________________ Source Files
#
SOURCES     +=  $(wildcard src/*.cpp)
SOURCES     +=  $(wildcard src/db/*.cpp)
#____________________________________________________________________________ Include Paths
#
INCPATH		=	-I "inc"
INCPATH		+=	-I "inc/db"
#INCPATH	+=	-I "add your header path"
#____________________________________________________________________________ Library Name and Paths
#
LIBPATH		=	-L "lib"
#LIBPATH		+=	-L "inc/db"
#LIBPATH	+=	-L "add your library path"
LIBS        =   -lsqlite3
LIBS		+=	-lpthread
#LIBS		+=	-lMyLibY
####################################################################################################
#                                       System Section                                             #
#                           !!! Please don't change this section !!!                               #
####################################################################################################
#____________________________________________________________________________ Object Files
#
ifeq ($(LANGUAGE),c)
#--------------------------------------------------------- C
OBJECTS		=	$(SOURCES:.c=.o)
#---------------------------------------
else
#--------------------------------------------------------- C++
OBJECTS		=	$(SOURCES:.cpp=.o)
#---------------------------------------
endif
#____________________________________________________________________________ Suffix Rules
# To get more rules: make -p -f/dev/null
#
ifeq ($(LANGUAGE),c)
#--------------------------------------------------------- C
.SUFFIXES: .o .c
#---------------------------------------
else
#--------------------------------------------------------- C++
.SUFFIXES: .o .cpp
#---------------------------------------
endif
#____________________________________________________________________________ Compiling & Linking
#
#---------------------------------------------------------------------- Cleaner
REMOVE		=	cs-rm -fr
#---------------------------------------------------------------------- Compiler
#--------------------------------------------------------- C
CC			=	arm-none-linux-gnueabi-gcc
#-------------------------------------------------------- C++
CXX			=	arm-none-linux-gnueabi-g++
#---------------------------------------------------------------------- Linker
ifeq ($(LANGUAGE),c)
#--------------------------------------------------------- C
	LD		=	$(CC)
#---------------------------------------
else
#-------------------------------------------------------- C++
	LD		=	$(CXX)
#---------------------------------------
endif
#--------------------------------------------------------------------- Compiler Flags
#--------------------------------------------------------- C
CFLAGS		=	-MD -MP -O -Wno-write-strings -Wall
#--------------------------------------------------------- C++
CXXFLAGS	=	$(CFLAGS)
#--------------------------------------------------------------------- Linker Flags
#LDFLAGS		=	-Wl
#--------------------------------------------------------------------- Compiling
#--------------------------------------------------------- C
.c.o:
	$(CC) $(INCPATH) $(CFLAGS) -c  $< -o $@
#--------------------------------------------------------- C++
.cpp.o:
	$(CXX) $(INCPATH) $(CXXFLAGS) -c  $< -o $@
#---------------------------------------------------------------------- Linking
$(PROGRAM): $(OBJECTS)
	$(LD) $(LDFLAGS) $(OBJECTS) -o bin/$@ $(LIBPATH) $(LIBS)
#____________________________________________________________________________ Targets
#
#---------------------------------------------------------------------- Dependency Rules
#depend:
#	@makedepend $(INCPATH) -Y -m $(SOURCES) 2>nul
#---------------------------------------------------------------------- Build
all: $(PROGRAM) rm
rm: $(PROGRAM)
	$(REMOVE) $(OBJECTS) $(OBJECTS:.o=.d)
#---------------------------------------------------------------------- Clean 
.PHONY: clean
clean:
	$(REMOVE) $(OBJECTS) $(OBJECTS:.o=.d) bin/$(PROGRAM)
